!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("dashjs"),require("adsplayer.js"),require("metricsagent.js")):"function"==typeof define&&define.amd?define("oneplayer",["dashjs","adsplayer.js","metricsagent.js"],t):"object"==typeof exports?exports.oneplayer=t(require("dashjs"),require("adsplayer.js"),require("metricsagent.js")):e.oneplayer=t(e.dashjs,e["adsplayer.js"],e["metricsagent.js"])}(window,function(e,t,i){return function(e){var t={};function i(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=e,i.c=t,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=19)}([function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.DASHJS="DASHJS",e.HLSFP="HLSFP"}(t.PlayerType||(t.PlayerType={})),function(e){e.DASH="DASH",e.MSS="MSS",e.HLS="HLS"}(t.HasProtocol||(t.HasProtocol={})),function(e){e.LIVE="LIVE",e.ONDEMAND="ONDEMAND"}(t.ServiceType||(t.ServiceType={})),function(e){e.METRICS="METRICS",e.ADINSERTION="ADINSERTION"}(t.PluginType||(t.PluginType={})),function(e){e.OCTET_STREAM="octet-stream",e.TEXT="text"}(t.ChallengeFormatType||(t.ChallengeFormatType={})),function(e){e.Video="video",e.Audio="audio",e.Text="text"}(t.MediaType||(t.MediaType={})),function(e){e.Alternative="alternative",e.Descriptions="descriptions",e.Main="main",e.MainDesc="main-desc",e.Translation="translation",e.Commentary="commentary",e.Clean="clean"}(t.AudioKind||(t.AudioKind={})),function(e){e.Captions="captions",e.Subtitles="subtitles",e.Descriptions="descriptions",e.Chapters="chapters",e.Metadata="metadata"}(t.TextKind||(t.TextKind={})),function(e){e.PLAYER_ERROR="player_error",e.AD_ERROR="ad_error",e.AD_START="ad_start",e.AD_END="ad_end"}(t.PlayerEvents||(t.PlayerEvents={}))},function(e,t,i){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.MEDIA_ERR_ABORTED=1]="MEDIA_ERR_ABORTED",e[e.MEDIA_ERR_NETWORK=2]="MEDIA_ERR_NETWORK",e[e.MEDIA_ERR_DECODE=3]="MEDIA_ERR_DECODE",e[e.MEDIA_ERR_SRC_NOT_SUPPORTED=4]="MEDIA_ERR_SRC_NOT_SUPPORTED",e[e.MEDIA_ERR_ENCRYPTED=5]="MEDIA_ERR_ENCRYPTED",e[e.CAPABILITY_ERR_MEDIASOURCE=10]="CAPABILITY_ERR_MEDIASOURCE",e[e.CAPABILITY_ERR_CODEC_UNSUPPORTED=11]="CAPABILITY_ERR_CODEC_UNSUPPORTED",e[e.DOWNLOAD_ERR_MANIFEST=20]="DOWNLOAD_ERR_MANIFEST",e[e.DOWNLOAD_ERR_CONTENT=21]="DOWNLOAD_ERR_CONTENT",e[e.CAPABILITY_ERR_MEDIAKEYS=100]="CAPABILITY_ERR_MEDIAKEYS",e[e.MEDIA_KEYERR_UNKNOWN=101]="MEDIA_KEYERR_UNKNOWN",e[e.MEDIA_KEYERR_CLIENT=102]="MEDIA_KEYERR_CLIENT",e[e.MEDIA_KEYERR_SERVICE=103]="MEDIA_KEYERR_SERVICE",e[e.MEDIA_KEYERR_OUTPUT=104]="MEDIA_KEYERR_OUTPUT",e[e.MEDIA_KEYERR_HARDWARECHANGE=105]="MEDIA_KEYERR_HARDWARECHANGE",e[e.MEDIA_KEYERR_DOMAIN=106]="MEDIA_KEYERR_DOMAIN",e[e.MEDIAKEYS_ERR_KEYSYSTEM_ACCESS=110]="MEDIAKEYS_ERR_KEYSYSTEM_ACCESS",e[e.MEDIAKEYS_ERR_SERVER_CERTIFICATE=111]="MEDIAKEYS_ERR_SERVER_CERTIFICATE",e[e.MEDIAKEYS_ERR_CREATE_SESSION=112]="MEDIAKEYS_ERR_CREATE_SESSION",e[e.MEDIAKEYS_ERR_UNKNOWN_LICENSER=113]="MEDIAKEYS_ERR_UNKNOWN_LICENSER",e[e.MEDIAKEYS_ERR_LICENSE_REQUEST=114]="MEDIAKEYS_ERR_LICENSE_REQUEST",e[e.MEDIAKEYS_ERR_KEY_ERROR=115]="MEDIAKEYS_ERR_KEY_ERROR",e[e.MEDIAKEYS_ERR_EXPIRED=116]="MEDIAKEYS_ERR_EXPIRED",e[e.MEDIAKEYS_ERR_OUTPUT_RESTRICTED=117]="MEDIAKEYS_ERR_OUTPUT_RESTRICTED",e[e.MEDIAKEYS_ERR_INTERNAL_ERROR=118]="MEDIAKEYS_ERR_INTERNAL_ERROR",e[e.MEDIA_MORALITY_ERR=130]="MEDIA_MORALITY_ERR",e[e.PLAYER_API_ERROR=998]="PLAYER_API_ERROR",e[e.PLAYER_INTERNAL_ERROR=999]="PLAYER_INTERNAL_ERROR"}(r=t.PlayerErrorCode||(t.PlayerErrorCode={})),t.PlayerErrorMessage={},t.PlayerErrorMessage[r.MEDIA_ERR_ABORTED]="Fetching process aborted",t.PlayerErrorMessage[r.MEDIA_ERR_NETWORK]="Network error",t.PlayerErrorMessage[r.MEDIA_ERR_DECODE]="Media decoding error",t.PlayerErrorMessage[r.MEDIA_ERR_SRC_NOT_SUPPORTED]="Media format not supported",t.PlayerErrorMessage[r.MEDIA_ERR_ENCRYPTED]="Media is encrypted",t.PlayerErrorMessage[r.CAPABILITY_ERR_MEDIASOURCE]="Media Source extensions are not supported",t.PlayerErrorMessage[r.CAPABILITY_ERR_CODEC_UNSUPPORTED]="Media codec is not supported",t.PlayerErrorMessage[r.DOWNLOAD_ERR_MANIFEST]="Failed to download manifest",t.PlayerErrorMessage[r.DOWNLOAD_ERR_CONTENT]="Failed to download media segment",t.PlayerErrorMessage[r.CAPABILITY_ERR_MEDIAKEYS]="DRM: Encrypted Media extensions are not supported or enabled",t.PlayerErrorMessage[r.MEDIA_KEYERR_UNKNOWN]="DRM: An unspecified error occurred",t.PlayerErrorMessage[r.MEDIA_KEYERR_CLIENT]="DRM: Failed to install or update Key System",t.PlayerErrorMessage[r.MEDIA_KEYERR_SERVICE]="DRM: License service error",t.PlayerErrorMessage[r.MEDIA_KEYERR_OUTPUT]="DRM: Output is restricted",t.PlayerErrorMessage[r.MEDIA_KEYERR_HARDWARECHANGE]="DRM: Error due to a hardware configuration change",t.PlayerErrorMessage[r.MEDIA_KEYERR_DOMAIN]="DRM: Failed to join the domain",t.PlayerErrorMessage[r.MEDIAKEYS_ERR_KEYSYSTEM_ACCESS]="DRM: Key System configuration is not supported",t.PlayerErrorMessage[r.MEDIAKEYS_ERR_SERVER_CERTIFICATE]="DRM: Failed to update server certificate",t.PlayerErrorMessage[r.MEDIAKEYS_ERR_CREATE_SESSION]="DRM: Failed to create session",t.PlayerErrorMessage[r.MEDIAKEYS_ERR_UNKNOWN_LICENSER]="DRM: Missing license server url",t.PlayerErrorMessage[r.MEDIAKEYS_ERR_LICENSE_REQUEST]="DRM: Failed to request license",t.PlayerErrorMessage[r.MEDIAKEYS_ERR_KEY_ERROR]="DRM: License error",t.PlayerErrorMessage[r.MEDIAKEYS_ERR_EXPIRED]="DRM: The license has expired",t.PlayerErrorMessage[r.MEDIAKEYS_ERR_OUTPUT_RESTRICTED]="DRM: Output is restricted",t.PlayerErrorMessage[r.MEDIAKEYS_ERR_INTERNAL_ERROR]="DRM: Session error",t.PlayerErrorMessage[r.PLAYER_INTERNAL_ERROR]="Internal error"},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(0),n=i(18),o=i(7),s=function(){function e(){}return e.getVersion=function(){return"0.13.0-dev"},e.create=function(e,t,i){return new Promise(function(s,a){var d=null;switch(e){case r.PlayerType.DASHJS:d=new n.DashJSPlayer;break;case r.PlayerType.HLSFP:d=new o.HlsFpPlayer;break;default:throw"Unknown player type"}d.init(t,i).then(function(){s(d)}).catch(function(e){a(e)})})},e.addPlugin=function(e,t,i){if(!e)throw new Error("The player instance is not valid while adding the plugin");e.addPlugin(t,i)},e}();t.OnePlayer=s},function(t,i){t.exports=e},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(0),n=i(1),o=i(17),s=i(15),a=i(13),d=i(12),l=function(){function e(){this.plugins=[]}return e.prototype.init=function(e,t){if(!(e instanceof HTMLMediaElement))throw new Error("video element must be instance of HTMLMediaElement");return this.videoElement=e,this.stream=null,this.storeMediaSettings=!1,this.mediaSettingsKey="oneplayerjs_media_settings",this.playbackSpeedController=new a.PlaybackSpeedController,this.playbackSpeedController.init(this.videoElement),this.debugController=new d.DebugController(this,this.videoElement),this.logsEnabled=!1,Promise.resolve()},e.prototype.enableLogs=function(e){this.logsEnabled=e;for(var t=0;t<this.plugins.length;t++)this.plugins[t].enableLogs(e)},e.prototype.enableLastMediaSettingsCaching=function(e,t){void 0===t&&(t="oneplayerjs_media_settings"),this.storeMediaSettings=e,t&&t.length>0&&(this.mediaSettingsKey=t),this.storeMediaSettings?this.applyMediaSettings():this.removeMediaSettings()},e.prototype.reset=function(){this.stop(),this.debugController.reset();for(var e=0;e<this.plugins.length;e++)this.plugins[e].reset()},e.prototype.load=function(e,t){var i=this;return void 0===t&&(t=!0),new Promise(function(r,n){var o=function(e){i.loadStream(e).then(function(){r()}).catch(function(e){n(e)})};i.stream&&i.stop(),i.logsEnabled&&console.log("[oneplayer] Load stream",e),i.applyMediaSettings(),t||o(e);for(var s=[],a=0;a<i.plugins.length;a++)s.push(i.plugins[a].load(e));Promise.all(s).then(function(t){-1===t.indexOf("preroll")&&o(e)}).catch(function(t){o(e)})})},e.prototype.setPlaybackSpeed=function(e){this.playbackSpeedController.setSpeed(e)},e.prototype.getPlaybackSpeed=function(){return this.playbackSpeedController.getSpeed()},e.prototype.stop=function(e,t){if(void 0===e&&(e=!0),void 0===t&&(t=!0),e?(this.stream=null,this.playbackSpeedController.reset(),this.debugController.stop()):this.playbackSpeedController.setSpeed(1),t)for(var i=0;i<this.plugins.length;i++)this.plugins[i].stop()},e.prototype.getTracks=function(e){var t={};return t[r.MediaType.Video]=this.getTracksForType(r.MediaType.Video),t[r.MediaType.Audio]=this.getTracksForType(r.MediaType.Audio),t[r.MediaType.Text]=this.getTracksForType(r.MediaType.Text),t},e.prototype.addPlugin=function(e,t){var i;switch(e){case r.PluginType.METRICS:i=new o.MetricsPlugin;break;case r.PluginType.ADINSERTION:i=new s.AdsPlugin;break;default:throw new Error("Unknown plugin type: "+e)}i.init(this,this.videoElement,t),i.enableLogs(this.logsEnabled),this.plugins.push(i)},e.prototype.showDebug=function(e,t){this.debugController.showDebugPanel(e,t)},e.prototype.loadStream=function(e){return this.stream=e,this.debugController.start(e),Promise.resolve()},e.prototype.sendErrorEvent=function(e,t,i){var o=document.createEvent("CustomEvent"),s={code:e,message:n.PlayerErrorMessage[e],extMessage:t,data:i};o.initCustomEvent(r.PlayerEvents.PLAYER_ERROR,!1,!1,s),this.videoElement.dispatchEvent(o)},e.prototype.storeDefaultLanguage=function(e,t){if(this.storeMediaSettings){var i=this.getMediaSettings();i[e]||(i[e]={}),i[e].lang=t,localStorage.setItem(this.mediaSettingsKey,JSON.stringify(i))}},e.prototype.storeTextState=function(e){if(this.storeMediaSettings){var t=this.getMediaSettings();t[r.MediaType.Text]||(t[r.MediaType.Text]={}),t[r.MediaType.Text].enable=e,localStorage.setItem(this.mediaSettingsKey,JSON.stringify(t))}},e.prototype.applyMediaSettings=function(){var e=localStorage.getItem(this.mediaSettingsKey);if(e)try{var t=JSON.parse(e);void 0!==t.audio&&void 0!==t.audio.lang&&this.setDefaultAudioLanguage(t.audio.lang),void 0!==t.text&&void 0!==t.text.lang&&this.setDefaultTextLanguage(t.text.lang),void 0!==t.text&&void 0!==t.text.enable&&this.setDefaultTextEnabled(t.text.enable)}catch(e){console.log(e)}},e.prototype.removeMediaSettings=function(){localStorage.removeItem(this.mediaSettingsKey)},e.prototype.getMediaSettings=function(){var e={},t=localStorage.getItem(this.mediaSettingsKey);if(t)try{e=JSON.parse(t)}catch(t){return e}return e},e}();t.DefaultPlayer=l},function(e,t,i){var r;e.exports=function e(t,i,n){function o(a,d){if(!i[a]){if(!t[a]){var l="function"==typeof r&&r;if(!d&&l)return r(a,!0);if(s)return s(a,!0);var h=new Error("Cannot find module '"+a+"'");throw h.code="MODULE_NOT_FOUND",h}var u=i[a]={exports:{}};t[a][0].call(u.exports,function(e){var i=t[a][1][e];return o(i||e)},u,u.exports,e,t,i,n)}return i[a].exports}for(var s="function"==typeof r&&r,a=0;a<n.length;a++)o(n[a]);return o}({"/":[function(e,t,i){"use strict";i.byteLength=function(e){var t=l(e),i=t[0],r=t[1];return 3*(i+r)/4-r},i.toByteArray=function(e){for(var t,i=l(e),r=i[0],s=i[1],a=new o(function(e,t,i){return 3*(t+i)/4-i}(0,r,s)),d=0,h=s>0?r-4:r,u=0;u<h;u+=4)t=n[e.charCodeAt(u)]<<18|n[e.charCodeAt(u+1)]<<12|n[e.charCodeAt(u+2)]<<6|n[e.charCodeAt(u+3)],a[d++]=t>>16&255,a[d++]=t>>8&255,a[d++]=255&t;return 2===s&&(t=n[e.charCodeAt(u)]<<2|n[e.charCodeAt(u+1)]>>4,a[d++]=255&t),1===s&&(t=n[e.charCodeAt(u)]<<10|n[e.charCodeAt(u+1)]<<4|n[e.charCodeAt(u+2)]>>2,a[d++]=t>>8&255,a[d++]=255&t),a},i.fromByteArray=function(e){for(var t,i=e.length,n=i%3,o=[],s=16383,a=0,d=i-n;a<d;a+=s)o.push(u(e,a,a+s>d?d:a+s));return 1===n?(t=e[i-1],o.push(r[t>>2]+r[t<<4&63]+"==")):2===n&&(t=(e[i-2]<<8)+e[i-1],o.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"=")),o.join("")};for(var r=[],n=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,d=s.length;a<d;++a)r[a]=s[a],n[s.charCodeAt(a)]=a;function l(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=e.indexOf("=");-1===i&&(i=t);var r=i===t?0:4-i%4;return[i,r]}function h(e){return r[e>>18&63]+r[e>>12&63]+r[e>>6&63]+r[63&e]}function u(e,t,i){for(var r,n=[],o=t;o<i;o+=3)r=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),n.push(h(r));return n.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},{}]},{},[])("/")},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(0),n=i(5),o=function(){function e(){}return e.prototype.init=function(e,t){this.videoElement=e,t&&t["com.apple.fps.1_0"]&&(this.keySystemConfiguration=t["com.apple.fps.1_0"]),this.logsEnabled=!1,this.mediaKeySession=null,this.licenseRequest=null,this.needKeyListener=this.onNeedKey.bind(this),this.keyMessageListener=this.onKeyMessage.bind(this),this.keyAddedListener=this.onKeyAdded.bind(this),this.keyErrorListener=this.onKeyError.bind(this),this.videoElement.addEventListener("webkitneedkey",this.needKeyListener)},e.prototype.reset=function(){null!==this.licenseRequest&&(this.licenseRequest.abort(),this.licenseRequest=null),this.mediaKeySession=null,this.videoElement.removeEventListener("webkitneedkey",this.needKeyListener)},e.prototype.enableLogs=function(e){this.logsEnabled=e},e.prototype.debug=function(e){this.logsEnabled&&console.log("[HLS-FP] "+e)},e.prototype.sendErrorEvent=function(e){var t=document.createEvent("CustomEvent");t.initCustomEvent(r.PlayerEvents.PLAYER_ERROR,!1,!1,e),this.videoElement.dispatchEvent(t)},e.prototype.stringToArray=function(e){for(var t=new ArrayBuffer(2*e.length),i=new Uint16Array(t),r=0;r<e.length;r++)i[r]=e.charCodeAt(r);return i},e.prototype.getChallengeFormatType=function(){return this.keySystemConfiguration&&this.keySystemConfiguration.challengeFormat?this.keySystemConfiguration.challengeFormat:r.ChallengeFormatType.OCTET_STREAM},e.prototype.extractContentId=function(e){var t=String.fromCharCode.apply(null,new Uint16Array(e.buffer)).split("//");if(2!==t.length)throw new Error("Invalid content key format");return t[1]},e.prototype.getCertificate=function(){return this.keySystemConfiguration&&this.keySystemConfiguration.serverCertificate?n.toByteArray(this.keySystemConfiguration.serverCertificate):new Uint8Array(0)},e.prototype.concatInitDataIdAndCertificate=function(e,t,i){var r="string"==typeof t?this.stringToArray(t):t,n=0,o=new ArrayBuffer(e.byteLength+4+r.byteLength+4+i.byteLength),s=new DataView(o),a=new Uint8Array(o,n,e.byteLength);a.set(e),n+=a.byteLength,s.setUint32(n,r.byteLength,!0),n+=4;var d=new Uint16Array(o,n,t.length);return d.set(r),n+=d.byteLength,s.setUint32(n,i.byteLength,!0),n+=4,new Uint8Array(o,n,i.byteLength).set(i),new Uint8Array(o,0,o.byteLength)},e.prototype.processLicenseMessage=function(e){return this.getChallengeFormatType()===r.ChallengeFormatType.OCTET_STREAM?e:"spc="+n.fromByteArray(e)+"&assetId="+encodeURIComponent(this.mediaKeySession.contentId)},e.prototype.sendLicenseRequest=function(e,t,i){var n=this;return new Promise(function(o,s){var a=n.getChallengeFormatType(),d=new XMLHttpRequest,l=!1;d.responseType=a===r.ChallengeFormatType.OCTET_STREAM?"arraybuffer":"text",d.withCredentials=i,d.onload=function(e){this.status<200||this.status>299||200===this.status&&4===this.readyState&&(l=!0,o(this))},d.onloadend=function(e){l||s(this)},d.open("POST",e,!0),d.setRequestHeader("Content-Type",a===r.ChallengeFormatType.OCTET_STREAM?"application/octet-stream":"application/x-www-form-urlencoded"),d.send(t)})},e.prototype.processLicenseResponse=function(e){var t;this.getChallengeFormatType()===r.ChallengeFormatType.TEXT?("<ckc>"===(t=e.responseText.trim()).substr(0,5)&&"</ckc>"===t.substr(-6)&&(t=t.slice(5,-6)),t=n.toByteArray(t)):t=new Uint8Array(e.response),this.debug("update key session"),this.mediaKeySession.update(t)},e.prototype.getKeyError=function(e){var t=e.target.error,i="MEDIA_KEYERR",r="MediakeyError";if(t)switch(t.code){case 1:i="MEDIA_KEYERR_UNKNOWN",r="An unspecified error occurred. This value is used for errors that don't match any of the other codes.";break;case 2:i="MEDIA_KEYERR_CLIENT",r="The Key System could not be installed or updated.";break;case 3:i="MEDIA_KEYERR_SERVICE",r="The message passed into update indicated an error from the license service.";break;case 4:i="MEDIA_KEYERR_OUTPUT",r="There is no available output device with the required characteristics for the content protection system.";break;case 5:i="MEDIA_KEYERR_HARDWARECHANGE",r+="A hardware configuration change caused a content protection error.";break;case 6:i="MEDIA_KEYERR_DOMAIN",r="An error occurred in a multi-device domain licensing configuration. The most common error is a failure to join the domain.";break;default:i="MEDIA_KEYERR_UNKNOWN",r="An unspecified error occurred. This value is used for errors that don't match any of the other codes."}else i="MEDIA_KEYERR_UNKNOWN",r="An unspecified error occurred. This value is used for errors that don't match any of the other codes.";return t.systemCode&&(r+="  (System Code = "+e.systemCode+")"),{code:i,message:r}},e.prototype.onNeedKey=function(e){this.debug("needkey event");var t=this.extractContentId(e.initData),i=this.getCertificate(),r=this.concatInitDataIdAndCertificate(e.initData,t,i);this.debug("create key session");var n=new window.WebKitMediaKeys("com.apple.fps.1_0");if(this.videoElement.webkitSetMediaKeys(n),this.mediaKeySession=this.videoElement.webkitKeys.createSession("video/mp4",r),!this.mediaKeySession)throw new Error("Could not create key session");this.mediaKeySession.error&&this.sendErrorEvent({code:"MEDIA_KEYMESSERR_NO_SESSION",message:"Failed to create key session",data:this.mediaKeySession.error}),this.mediaKeySession.contentId=t,this.mediaKeySession.addEventListener("webkitkeymessage",this.keyMessageListener),this.mediaKeySession.addEventListener("webkitkeyadded",this.keyAddedListener),this.mediaKeySession.addEventListener("webkitkeyerror",this.keyErrorListener)},e.prototype.onKeyMessage=function(e){var t=this;this.debug("keymessage event");var i=this.keySystemConfiguration?this.keySystemConfiguration.serverURL:null;if(i){var r=e.message;r=this.processLicenseMessage(r);var n=!!this.keySystemConfiguration&&!0===this.keySystemConfiguration.withCredentials;this.debug("send license request"),this.sendLicenseRequest(i,r,n).then(function(e){t.debug("received license reponse"),t.processLicenseResponse(e)}).catch(function(e){t.sendErrorEvent({code:"MEDIA_KEYMESSERR_LICENSER_ERROR",message:"License request failed",data:{status:e.status,error:e.response}})})}else this.sendErrorEvent({code:"MEDIA_KEYMESSERR_URL_LICENSER_UNKNOWN",message:"No license server URL specified"})},e.prototype.onKeyAdded=function(e){this.debug("keyadded event")},e.prototype.onKeyError=function(e){this.debug("keyerror event");var t=this.getKeyError(e);this.sendErrorEvent(t)},e}();t.FairPlayController=o},function(e,t,i){"use strict";var r=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var n=i(4),o=i(0),s=i(6),a=i(1),d=function(e){function t(){return e.call(this)||this}return r(t,e),t.prototype.getVersion=function(){return""},t.prototype.getPlayerType=function(){return o.PlayerType.HLSFP},t.prototype.init=function(t,i){return e.prototype.init.call(this,t,i),this.defaultAudioLanguage=null,this.defaultTextLanguage=null,this.defaultTextEnabled=!1,this.selectedTextTrackId=null,this.loadedmetadataListener=this.onLoadedmetadata.bind(this),this.stateChangedListener=this.onStateChanged.bind(this),this.seekedListener=this.onSeeked.bind(this),this.errorListener=this.onError.bind(this),this.videoElement.addEventListener("loadedmetadata",this.loadedmetadataListener),this.videoElement.addEventListener("play",this.stateChangedListener),this.videoElement.addEventListener("pause",this.stateChangedListener),this.videoElement.addEventListener("playing",this.stateChangedListener),this.videoElement.addEventListener("waiting",this.stateChangedListener),this.videoElement.addEventListener("seeking",this.stateChangedListener),this.videoElement.addEventListener("error",this.errorListener),Promise.resolve()},t.prototype.setConfig=function(e){},t.prototype.enableLogs=function(t){e.prototype.enableLogs.call(this,t),this.fpcontroller&&this.fpcontroller.enableLogs(t)},t.prototype.addEventListener=function(e,t,i){this.videoElement.addEventListener(e,t,i)},t.prototype.removeEventListener=function(e,t,i){this.videoElement.removeEventListener(e,t,i)},t.prototype.reset=function(){this.videoElement.removeEventListener("loadedmetadata",this.loadedmetadataListener),this.videoElement.removeEventListener("play",this.stateChangedListener),this.videoElement.removeEventListener("pause",this.stateChangedListener),this.videoElement.removeEventListener("playing",this.stateChangedListener),this.videoElement.removeEventListener("waiting",this.stateChangedListener),this.videoElement.removeEventListener("seeking",this.stateChangedListener),this.videoElement.removeEventListener("error",this.errorListener)},t.prototype.play=function(){return this.videoElement.play()},t.prototype.pause=function(){this.videoElement.pause()},t.prototype.seek=function(e){this.videoElement.currentTime=e},t.prototype.stop=function(t,i){void 0===t&&(t=!0),e.prototype.stop.call(this,i),this.debug("stop"),t||this.isLive()?(this.videoElement.pause(),null!==this.fpcontroller&&(this.fpcontroller.reset(),this.fpcontroller=null),this.videoElement.removeAttribute("src"),this.videoElement.load()):(this.videoElement.addEventListener("seeked",this.seekedListener),this.videoElement.currentTime=0)},t.prototype.getDuration=function(){return this.videoElement.duration},t.prototype.isLive=function(){return this.getDuration()===Number.POSITIVE_INFINITY},t.prototype.getTime=function(){return this.videoElement.currentTime},t.prototype.getTracksForType=function(e){switch(e){case o.MediaType.Video:return this.getVideoTracks();case o.MediaType.Audio:return this.getAudioTracks();case o.MediaType.Text:return this.getTextTracks();default:return null}},t.prototype.getSelectedTrackForType=function(e){switch(e){case o.MediaType.Audio:return this.getSelectedAudioTrack();case o.MediaType.Text:return this.getSelectedTextTrack();default:return null}},t.prototype.getQualityForType=function(e){return-1},t.prototype.getBufferLevelForType=function(e){return-1},t.prototype.selectTrackForType=function(e,t){var i=null;switch(e){case o.MediaType.Audio:i=this.selectAudioTrack(t);break;case o.MediaType.Text:i=this.selectTextTrack(t),this.selectedTextTrackId=t}i&&(this.storeDefaultLanguage(e,i),e===o.MediaType.Text&&this.storeTextState(!0))},t.prototype.selectTrack=function(e){this.selectTrackForType(e.mediaType,e.id)},t.prototype.setDefaultAudioLanguage=function(e){this.defaultAudioLanguage=e},t.prototype.setDefaultTextLanguage=function(e){this.defaultTextLanguage=e},t.prototype.enableText=function(e){if(e)this.selectTextTrack(this.selectedTextTrackId);else for(var t=this.videoElement.textTracks,i=0;i<t.length;i++)t[i].mode="disabled";this.storeTextState(e)},t.prototype.isTextEnabled=function(){for(var e=this.videoElement.textTracks,t=0;t<e.length;t++)if("showing"===e[t].mode)return!0;return!1},t.prototype.setDefaultTextEnabled=function(e){this.defaultTextEnabled=!0},t.prototype.loadStream=function(t){var i=this;return new Promise(function(r,n){var o=function(e){i.debug("canplay"),i.videoElement.removeEventListener("canplay",o),i.videoElement.play().then(function(){r()}).catch(function(e){n(e)})};i.videoElement.addEventListener("canplay",o),e.prototype.loadStream.call(i,t),i.selectedTextTrackId=null,t.protData&&(i.protectionData=t.protData),i.fpcontroller=new s.FairPlayController,i.fpcontroller.init(i.videoElement,i.protectionData),i.videoElement.src=t.url+(t.startTime>=0?"#t="+t.startTime:"")})},t.prototype.limitToLowestBitrate=function(e){},t.prototype.getVideoTracks=function(){var e=[],t={mediaType:o.MediaType.Video,id:"video",selected:!0,codec:"",mimeType:"",lang:"",qualities:[]};return e.push(t),e},t.prototype.getAudioTracks=function(){var e=[],t=this.videoElement.audioTracks;if(0===t.length)return[];for(var i=0;i<t.length;i++)e.push(this.audioTrackToMediaInfo(t[i]));return e},t.prototype.getTextTracks=function(){var e=[],t=this.videoElement.textTracks;if(0===t.length)return[];for(var i=0;i<t.length;i++)e.push(this.textTrackToMediaInfo(t[i]));return e},t.prototype.selectAudioTrack=function(e,t){for(var i=this.videoElement.audioTracks,r=null,n=0;n<i.length;n++)(e&&i[n].id===e||t&&i[n].language===t)&&(i[n].enabled=!0,r=i[n].language);return r},t.prototype.selectTextTrack=function(e,t){for(var i=this.videoElement.textTracks,r=null,n=0;n<i.length;n++)e&&i[n].label===e||t&&i[n].language===t?(i[n].mode="showing",r=i[n].language):i[n].mode="disabled";return!r&&i.length>0&&(i[0].mode="showing",r=i[0].language),r},t.prototype.getSelectedAudioTrack=function(){for(var e=this.videoElement.audioTracks,t=0;t<e.length;t++)if(e[t].enabled)return this.audioTrackToMediaInfo(e[t]);return null},t.prototype.getSelectedTextTrack=function(){for(var e=this.videoElement.textTracks,t=0;t<e.length;t++)if("showing"===e[t].mode)return this.textTrackToMediaInfo(e[t]);return null},t.prototype.audioTrackToMediaInfo=function(e){return{mediaType:o.MediaType.Audio,id:e.id,selected:e.enabled,kind:e.kind,codec:"",mimeType:"",lang:e.language,qualities:[]}},t.prototype.textTrackToMediaInfo=function(e){return{mediaType:o.MediaType.Text,id:e.label,selected:"showing"===e.mode,kind:e.kind,codec:"",mimeType:"",lang:e.language,qualities:[]}},t.prototype.onLoadedmetadata=function(e){this.debug("loadedmetadata"),this.defaultAudioLanguage&&this.selectAudioTrack(void 0,this.defaultAudioLanguage),this.defaultTextLanguage&&this.defaultTextEnabled&&this.selectTextTrack(void 0,this.defaultTextLanguage)},t.prototype.onStateChanged=function(e){this.debug(e.type)},t.prototype.onSeeked=function(e){this.debug("seeked"),this.videoElement.pause(),this.videoElement.removeEventListener("seeked",this.seekedListener)},t.prototype.onError=function(e){switch(e.target.error.code){case 1:this.sendErrorEvent(a.PlayerErrorCode.MEDIA_ERR_ABORTED);break;case 2:this.sendErrorEvent(a.PlayerErrorCode.DOWNLOAD_ERR_CONTENT);break;case 3:this.sendErrorEvent(a.PlayerErrorCode.MEDIA_ERR_DECODE);break;case 4:this.sendErrorEvent(a.PlayerErrorCode.DOWNLOAD_ERR_MANIFEST,"",{url:e.target.src});break;case 5:this.sendErrorEvent(a.PlayerErrorCode.MEDIA_ERR_ENCRYPTED)}},t.prototype.debug=function(e){this.logsEnabled&&console.log("[HLS-FP] "+e)},t}(n.DefaultPlayer);t.HlsFpPlayer=d},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(3),n=function(){function e(){}return e.prototype.init=function(e){e.on(r.MediaPlayer.events.TTML_TO_PARSE,this.onTTMLPreProcess,this)},e.prototype.onTTMLPreProcess=function(e){e&&e.data&&(e.data=e.data.replace(/http:\/\/www.w3.org\/2006\/10\/ttaf1/gi,"http://www.w3.org/ns/ttml"),e.data=e.data.replace(/[\w]+:region/gi,"region"),e.data=e.data.replace(/[\w]+:begin/gi,"begin"),e.data=e.data.replace(/[\w]+:end/gi,"end"),e.data=e.data.replace(/[\w]+:style/gi,"style"))},e}();t.TTMLController=n},function(e,t){e.exports="#oneplayer-debug {\r\n    position: absolute;\r\n    top: 10px;\r\n    left: 10px;\r\n    border-radius: 4px;\r\n    padding: 0.5em;\r\n    color: #fff;\r\n    background: rgba(28, 28, 28, 0.8);\r\n    font-size: 12px;\r\n    font-family: monospace;\r\n}\r\n\r\n#oneplayer-debug-metrics {\r\n    display: flex;\r\n    flex-direction: row;\r\n}\r\n\r\n#oneplayer-debug-metrics > div {\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: space-evenly;\r\n    align-content: center;\r\n    padding: 0px;    \r\n}\r\n\r\n#oneplayer-debug-metrics > .left {\r\n    align-items: flex-end;\r\n}\r\n\r\n#oneplayer-debug-metrics > .right {\r\n    align-items: flex-start;\r\n}\r\n\r\n#oneplayer-debug-metrics > div > * {\r\n    height: 1.5em;\r\n    margin: 2px 0 2px 0;\r\n}\r\n\r\n#oneplayer-debug-metrics > div > span {\r\n    padding: 0 5px;\r\n}\r\n\r\n#oneplayer-debug-version {\r\n    font-style: italic;\r\n    font-size: 11px;\r\n    padding-top: 10px\r\n}\r\n\r\n/* chartist style customization */\r\n.ct-chart {\r\n    background: rgba(0, 0, 0, 0.5);\r\n}\r\n\r\n.ct-series-a .ct-line {\r\n    stroke: white;\r\n    stroke-width: 1px;\r\n}\r\n\r\n.ct-series-a .ct-area {\r\n    fill: white;\r\n    fill-opacity: 0.5;\r\n}\r\n\r\n.ct-series-a .ct-grid {\r\n    stroke: rgba(255, 255, 255, 0.5);\r\n    stroke-width: 1px;\r\n    stroke-dasharray: 2px;\r\n}\r\n\r\n.ct-series-a .ct-point {\r\n    stroke: white;\r\n    stroke-width: 1px;\r\n    stroke-linecap: round;\r\n}\r\n\r\n/* * {\r\n    border: 1px solid;\r\n    border-color: #FFFFFF;\r\n} */\r\n\r\n  "},function(e,t){e.exports='<div id=\'oneplayer-debug-metrics\'>\r\n  <div class=\'left\'>\r\n    <span>Protocol:</span>\r\n    <span>Type:</span>\r\n    <span>Playback state:</span>\r\n    <span>Playback time:</span>\r\n    <span id="oneplayer-debug-duration-jitter-label">Duration:</span>\r\n    <span>Playback quality:</span>\r\n    <span>Video buffer:</span>\r\n    <span>Audio buffer:</span>\r\n    <span>Video bitrate:</span>\r\n    <span>Connection speed:</span>\r\n  </div>\r\n  <div class=\'right\'>\r\n    <span id="oneplayer-debug-protocol"></span>\r\n    <span id="oneplayer-debug-stream-type"></span>\r\n    <span id="oneplayer-debug-playback-state"></span>\r\n    <span id="oneplayer-debug-playback-time"></span>\r\n    <span id="oneplayer-debug-duration-jitter"></span>\r\n    <span id="oneplayer-debug-playback-quality"></span>\r\n    <div class="ct-chart" id="oneplayer-debug-video-buffer-chart"></div>\r\n    <div class="ct-chart" id="oneplayer-debug-audio-buffer-chart"></div>\r\n    <div class="ct-chart" id="oneplayer-debug-video-bitrate-chart"></div>\r\n    <div class="ct-chart" id="oneplayer-debug-connection-speed-chart"></div>\r\n  </div>\r\n  <div class=\'right\'>\r\n    <span></span>\r\n    <span></span>\r\n    <span></span>\r\n    <span></span>\r\n    <span></span>\r\n    <span></span>\r\n    <span id="oneplayer-debug-video-buffer"></span>\r\n    <span id="oneplayer-debug-audio-buffer"></span>\r\n    <span id="oneplayer-debug-video-bitrate"></span>\r\n    <span id="oneplayer-debug-connection-speed"></span>\r\n  </div>\r\n</div>\r\n<div id="oneplayer-debug-version"><span></span></div>\r\n'},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(2),n=i(0),o=i(10),s=i(9);window.Chartist=window.Chartist||{};var a=function(){function e(e,t){this.version="",this.protocol="",this.streamType="",this.playbackState="",this.playbackTime=0,this.duration=0,this.jitter=0,this.videoBuffer=0,this.audioBuffer=0,this.bufferTarget=0,this.videoBitrate=0,this.connectionSpeed=0,this.playbackQuality=-1,this.player=e,this.videoElement=t,this.containerDiv=null,this.debugDiv=null,this.pollInterval=null,this.videoBufferSizes=[],this.audioBufferSizes=[],this.videoQualities=[],this.connectionSpeeds=[],this.stateChangedListener=this.onStateChanged.bind(this),this.pauseListener=this.onPause.bind(this),this.qualityRenderedListener=this.onQualityRendered.bind(this),this.registerEvents(),this.init()}return e.prototype.reset=function(){this.unregisterEvents(),this.show(!1)},e.prototype.start=function(e){this.init(),this.protocol=e.protocol||"",this.streamType=e.type?e.type===n.ServiceType.LIVE?"live":"static":"",this.render()},e.prototype.stop=function(){this.stopMetricsPolling(),this.init(),this.render()},e.prototype.show=function(e,t){e||null===this.debugDiv?e&&null===this.debugDiv&&(this.containerDiv=t||this.videoElement.parentElement,this.createDebugPanel(),this.render()):(this.containerDiv.removeChild(this.debugDiv),this.debugDiv=null)},e.prototype.registerEvents=function(){this.videoElement.addEventListener("loadedmetadata",this.stateChangedListener),this.videoElement.addEventListener("seeking",this.stateChangedListener),this.videoElement.addEventListener("seeked",this.stateChangedListener),this.videoElement.addEventListener("playing",this.stateChangedListener),this.videoElement.addEventListener("waiting",this.stateChangedListener),this.videoElement.addEventListener("pause",this.pauseListener),this.player.getPlayerType()===n.PlayerType.DASHJS&&this.player.addEventListener("qualityChangeRendered",this.qualityRenderedListener)},e.prototype.unregisterEvents=function(){this.videoElement.removeEventListener("loadedmetadata",this.stateChangedListener),this.videoElement.removeEventListener("seeking",this.stateChangedListener),this.videoElement.removeEventListener("seeked",this.stateChangedListener),this.videoElement.removeEventListener("playing",this.stateChangedListener),this.videoElement.removeEventListener("waiting",this.stateChangedListener),this.videoElement.removeEventListener("pause",this.pauseListener),this.player.getPlayerType()===n.PlayerType.DASHJS&&this.player.removeEventListener("qualityChangeRendered",this.qualityRenderedListener)},e.prototype.init=function(){this.version="oneplayer.js v"+r.OnePlayer.getVersion()+(this.player.getVersion().length>0?" / "+this.player.getVersion():""),this.protocol="",this.streamType="",this.playbackState="",this.playbackTime=0,this.duration=0,this.jitter=0,this.videoBufferSizes=[0],this.audioBufferSizes=[0],this.videoBuffer=0,this.audioBuffer=0,this.bufferTarget=0,this.videoQualities=[0],this.videoBitrate=0,this.connectionSpeeds=[0],this.connectionSpeed=0,this.playbackQuality=-1,this.liveStartTime=0,this.liveStartPlaybackTime=0},e.prototype.onStateChanged=function(e){this.playbackState=e.type,"loadedmetadata"!==e.type&&"playing"!==e.type||this.startMetricsPolling(),"playing"===e.type&&this.player.isLive()&&(this.liveStartTime=(new Date).getTime(),this.liveStartPlaybackTime=this.videoElement.currentTime)},e.prototype.onPause=function(e){this.playbackState="paused",this.render(),this.stopMetricsPolling()},e.prototype.onQualityRendered=function(e){e.mediaType===n.MediaType.Video&&(this.playbackQuality=e.newQuality)},e.prototype.startMetricsPolling=function(){var e=this;null===this.pollInterval&&(this.updateMetrics(),this.pollInterval=setInterval(function(){e.updateMetrics()},500))},e.prototype.stopMetricsPolling=function(){null!==this.pollInterval&&(clearInterval(this.pollInterval),this.pollInterval=null)},e.prototype.updateMetrics=function(){var e=(new Date).getTime();this.streamType=this.player.isLive()?"live":"static",this.playbackTime=this.videoElement.currentTime,this.duration=this.videoElement.duration,this.liveStartTime>0&&(this.jitter=(e-this.liveStartTime)/1e3-(this.playbackTime-this.liveStartPlaybackTime)),this.player.getPlayerType()===n.PlayerType.DASHJS&&this.updateDashMetrics(),this.render()},e.prototype.updateDashMetrics=function(){var e=this.player,t=e.getMetricsFor(n.MediaType.Video);t&&t.BufferState.length>0&&(this.bufferTarget=Math.max(this.bufferTarget,t.BufferState[t.BufferState.length-1].target)),this.videoBuffer=this.updateBufferLevel(t,this.videoBufferSizes,this.videoBufferChart),this.updateConnectionSpeed(t);var i=e.getMetricsFor(n.MediaType.Audio);this.audioBuffer=this.updateBufferLevel(i,this.audioBufferSizes,this.audioBufferChart),this.updateVideoBitrate()},e.prototype.updateBufferLevel=function(e,t,i){var r=0;return e&&e.BufferLevel.length>0&&(r=e.BufferLevel[e.BufferLevel.length-1].level/1e3,this.appendChartValue(t,r)),null!==this.debugDiv&&(i.options.high=this.bufferTarget),r},e.prototype.updateVideoBitrate=function(){var e=this.player.getSelectedTrackForType(n.MediaType.Video);if(null!==e){null!==this.debugDiv&&(this.videoBitrateChart.options.high=e.qualities.length-1);var t=this.player.getQualityForType(n.MediaType.Video);this.appendChartValue(this.videoQualities,t);var i=e.qualities[t];this.videoBitrate=i.bitrate}},e.prototype.updateConnectionSpeed=function(e){if(e&&0!==e.HttpList.length){var t=e.HttpList[e.HttpList.length-1];if(200===t.responsecode){var i=new Date(t.tresponse),r=(new Date(t._tfinish).getTime()-i.getTime())/1e3,n=t.trace.reduce(function(e,t){return e+t.b[0]},0);this.connectionSpeed=Math.round(8*n/r),this.appendChartValue(this.connectionSpeeds,this.connectionSpeed),null!==this.debugDiv&&(this.connectionSpeedChart.options.high=Math.max(this.connectionSpeedChart.options.high,this.connectionSpeed))}}},e.prototype.appendChartValue=function(e,t){e.length>=120&&e.shift(),e.push(t)},e.prototype.render=function(){this.debugDiv&&(this.debugDiv.querySelector("#oneplayer-debug-version").innerHTML=this.version,""!==this.streamType&&(this.debugDiv.querySelector("#oneplayer-debug-duration-jitter-label").innerHTML="live"===this.streamType?"Jitter:":"Duration:"),this.debugDiv.querySelector("#oneplayer-debug-protocol").innerHTML=this.protocol,this.debugDiv.querySelector("#oneplayer-debug-stream-type").innerHTML=this.streamType,this.debugDiv.querySelector("#oneplayer-debug-playback-state").innerHTML=this.playbackState,this.debugDiv.querySelector("#oneplayer-debug-playback-time").innerHTML=this.playbackTime.toFixed(3)+"s",this.debugDiv.querySelector("#oneplayer-debug-duration-jitter").innerHTML="live"===this.streamType?this.jitter.toFixed(3)+"s":this.formatDuration(this.duration),this.debugDiv.querySelector("#oneplayer-debug-playback-quality").innerHTML=this.getPlaybackQualityInfos(),this.debugDiv.querySelector("#oneplayer-debug-video-buffer").innerHTML=this.videoBuffer.toFixed(1)+"s",this.debugDiv.querySelector("#oneplayer-debug-audio-buffer").innerHTML=this.audioBuffer.toFixed(1)+"s",this.debugDiv.querySelector("#oneplayer-debug-video-bitrate").innerHTML=this.formatBitrate(this.videoBitrate),this.debugDiv.querySelector("#oneplayer-debug-connection-speed").innerHTML=this.formatBitrate(this.connectionSpeed),this.videoBufferChart.update({series:[this.videoBufferSizes]},this.videoBufferChart.options),this.audioBufferChart.update({series:[this.audioBufferSizes]},this.audioBufferChart.options),this.videoBitrateChart.update({series:[this.videoQualities]},this.videoBitrateChart.options),this.connectionSpeedChart.update({series:[this.connectionSpeeds]},this.connectionSpeedChart.options),this.debugDiv.style.visibility="visible")},e.prototype.formatDuration=function(e){var t=e.toFixed(3)+"s";return e<60?t:(t+=" (",e>3600&&(t+=Math.floor(e/3600)+"h"),e>60&&(t+=Math.floor(e%3600/60)+"m"),t+=(e%60).toFixed(3)+"s)")},e.prototype.formatBitrate=function(e){var t=Math.round(e/1e3);return t>1e3?(t/1e3).toFixed(1)+"Mb/s":t+"Kb/s"},e.prototype.getPlaybackQualityInfos=function(){if(-1===this.playbackQuality)return"";var e=this.player.getSelectedTrackForType(n.MediaType.Video);if(null===e)return"";var t=e.qualities[this.playbackQuality],i=this.formatBitrate(t.bitrate);return t.width&&t.height&&(i+=" - "+t.width+"x"+t.height),i+=" ("+(this.playbackQuality+1)+"/"+e.qualities.length+")"},e.prototype.loadChartist=function(){var e=document.createElement("script");e.src="https://cdnjs.cloudflare.com/ajax/libs/chartist/0.11.0/chartist.js",e.type="text/javascript",e.onload=this.ShowDebug.bind(this),document.getElementsByTagName("head")[0].appendChild(e)},e.prototype.ShowDebug=function(){this.addStyles("oneplayer-debug-styles",s),this.debugDiv=document.createElement("div"),this.debugDiv.style.visibility="hidden",this.debugDiv.id="oneplayer-debug",this.debugDiv.innerHTML=o,this.containerDiv.appendChild(this.debugDiv);var e={high:this.bufferTarget,low:0,fullWidth:!0,showPoint:!1,showLine:!1,showArea:!0,chartPadding:{bottom:0,left:0,right:0,top:0},axisX:{showGrid:!1,showLabel:!1,offset:0},axisY:{showGrid:!1,showLabel:!1,offset:0},lineSmooth:window.Chartist.Interpolation.none()};this.videoBufferChart=new window.Chartist.Line("#oneplayer-debug-video-buffer-chart",{series:[this.videoBufferSizes]},e),this.audioBufferChart=new window.Chartist.Line("#oneplayer-debug-audio-buffer-chart",{series:[this.videoBufferSizes]},e),this.videoBitrateChart=new window.Chartist.Line("#oneplayer-debug-video-bitrate-chart",{series:[this.videoQualities]},{low:0,fullWidth:!0,showPoint:!1,showLine:!0,showArea:!1,chartPadding:{bottom:0,left:0,right:0,top:0},axisX:{showGrid:!1,showLabel:!1,offset:0},axisY:{showGrid:!1,showLabel:!1,offset:0},lineSmooth:window.Chartist.Interpolation.step()}),this.connectionSpeedChart=new window.Chartist.Line("#oneplayer-debug-connection-speed-chart",{series:[this.connectionSpeeds]},{low:0,fullWidth:!0,showPoint:!1,showLine:!0,showArea:!1,chartPadding:{bottom:0,left:0,right:0,top:0},axisX:{showGrid:!1,showLabel:!1,offset:0},axisY:{showGrid:!1,showLabel:!1,offset:0},lineSmooth:window.Chartist.Interpolation.simple()})},e.prototype.createDebugPanel=function(){window.Chartist.Interpolation?this.ShowDebug():this.loadChartist()},e.prototype.addStyles=function(e,t){var i=this.getHeadSection(),r=i.querySelector("#"+e);r||((r=document.createElement("style")).id=e,r.innerHTML=t,i.appendChild(r))},e.prototype.getHeadSection=function(){var e=document.getElementsByTagName("head");if(e.length>0)return e[0];var t=document.createElement("head");return document.body.appendChild(t),t},e}();t.DebugPanel=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});i(2);var r=i(11),n=function(){function e(e,t){this.player=e,this.debug=!1,this.verbose=!1,this.onKeyPressedListener=this.onKeyPressed.bind(this),window.addEventListener("keydown",this.onKeyPressedListener),this.debugPanel=new r.DebugPanel(e,t)}return e.prototype.reset=function(){this.debugPanel.reset()},e.prototype.start=function(e){this.debugPanel.start(e)},e.prototype.stop=function(){this.debugPanel.stop()},e.prototype.showDebugPanel=function(e,t){this.debugPanel.show(e,t)},e.prototype.onKeyPressed=function(e){if(!0===e.altKey&&!0===e.ctrlKey&&!0===e.shiftKey&&68===e.keyCode&&(this.debug=!this.debug,this.debugPanel.show(this.debug)),!0===e.altKey&&!0===e.ctrlKey&&!0===e.shiftKey&&86===e.keyCode){this.verbose=!this.verbose,console.log("oneplayer.js debug "+(this.verbose?"ON":"OFF"));var t=this.player.getVersion();console.log(" / "+t),this.player.enableLogs(this.verbose)}},e}();t.DebugController=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this.speed=0,this.trickModeSpeed=0}return e.prototype.init=function(e){this.videoElement=e,this.volume=null,this.playPromise=null,this.onSeekedListener=this.onSeeked.bind(this)},e.prototype.reset=function(){this.stopTrickMode(),this.volume&&(this.videoElement.volume=this.volume,this.volume=null)},e.prototype.setSpeed=function(e){if(e<=0&&e>-1)throw new Error("The provided playback speed ("+e+") is not in the supported range");if(isNaN(this.videoElement.duration))throw new Error("Playback speed can not be changed until video is not initialized");this.speed=e,0===this.trickModeSpeed&&1!==this.speed&&null===this.playPromise&&this.applySpeed()},e.prototype.getSpeed=function(){return 0===this.trickModeSpeed?this.videoElement.playbackRate:this.trickModeSpeed},e.prototype.applySpeed=function(){1===this.videoElement.playbackRate&&0===this.trickModeSpeed&&1!==this.speed&&(this.volume=this.videoElement.volume,this.videoElement.volume=0),Math.abs(this.speed)<=1&&0!==this.trickModeSpeed&&this.stopTrickMode(),(this.speed<=-1||this.speed>1)&&(0===this.trickModeSpeed?this.startTrickMode(this.speed):this.trickModeSpeed!==this.speed&&(this.trickModeSpeed=this.speed)),this.speed>0&&this.speed<=1&&(this.videoElement.playbackRate=this.speed,this.videoElement.paused&&(this.playPromise=this.videoElement.play().then(this.onPlay.bind(this))))},e.prototype.startTrickMode=function(e){this.trickModeSpeed=e,this.videoElement.pause(),this.videoElement.playbackRate=1,this.videoElement.addEventListener("seeked",this.onSeekedListener),this.seek()},e.prototype.stopTrickMode=function(){this.videoElement.removeEventListener("seeked",this.onSeekedListener),clearTimeout(this.seekTimeout),this.trickModeSpeed=0},e.prototype.seek=function(){this.seekTime=(new Date).getTime();var e=this.videoElement.currentTime+this.trickModeSpeed;this.videoElement.currentTime=Math.min(Math.max(e,0),this.videoElement.duration)},e.prototype.onSeeked=function(){var e=this;this.videoElement.pause();var t=(new Date).getTime()-this.seekTime;this.applySpeed(),0!==this.trickModeSpeed&&this.videoElement.currentTime>0&&this.videoElement.currentTime<this.videoElement.duration&&(this.seekTimeout=setTimeout(function(){e.seek()},Math.max(1e3-t,0)))},e.prototype.onPlay=function(){this.playPromise=null,this.applySpeed(),1===this.videoElement.playbackRate&&this.volume&&(this.videoElement.volume=this.volume,this.volume=null)},e}();t.PlaybackSpeedController=r},function(e,i){e.exports=t},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(0),n=i(14),o=function(){function e(){}return e.prototype.getType=function(){return r.PluginType.METRICS},e.prototype.getVersion=function(){return this.checkInitialized(),"adsplayer.js_"+this.adsPlayer.getVersion()},e.prototype.init=function(e,t,i){if(!i.adsRenderingDiv)throw new Error("Failed to initialize Ad-insertion plugin: div for rendering ads must be provided");this.handleMainPlayerPlayback=!0,i.handleMainPlayerPlayback&&(this.handleMainPlayerPlayback=i.handleMainPlayerPlayback),this.videoElement=t,this.player=e,this.adsRenderingDiv=i.adsRenderingDiv,this.adsPlayer=new n.AdsPlayer,this.adsPlayer.init(this.videoElement,this.adsRenderingDiv,this.handleMainPlayerPlayback),this.adsPlayer.addEventListener(n.EventTypes.ERROR,this.onError.bind(this)),this.adsPlayer.addEventListener(n.EventTypes.START,this.onStart.bind(this)),this.adsPlayer.addEventListener(n.EventTypes.END,this.onEnd.bind(this)),this.adsPlayer.addEventListener(n.EventTypes.ADD_ELEMENT,this.onAddElement.bind(this)),this.adsPlayer.addEventListener(n.EventTypes.REMOVE_ELEMENT,this.onRemoveElement.bind(this)),this.adsPlayer.addEventListener(n.EventTypes.PLAY,this.onPlay.bind(this)),this.adsPlayer.addEventListener(n.EventTypes.PAUSE,this.onPause.bind(this)),this.adsPlayer.addEventListener(n.EventTypes.CLICK,this.onClick.bind(this))},e.prototype.enableLogs=function(e){this.adsPlayer.enableLogs(e)},e.prototype.reset=function(){this.checkInitialized(),this.adsPlayer.destroy()},e.prototype.load=function(e){var t=this;return this.checkInitialized(),new Promise(function(i,r){t.adsPlayer.load(e).then(function(e){i(e?"preroll":"")}).catch(function(e){i()})})},e.prototype.stop=function(){this.checkInitialized(),this.adsPlayer.reset(),this.videoElement.style.display="block",this.adsRenderingDiv.style.display="none"},e.prototype.checkInitialized=function(){if(!this.adsPlayer)throw new Error("Ad-Insertion plugin not initialized")},e.prototype.onError=function(e){var t={code:e.data.code,message:e.data.message,extMessage:"",data:e.data.data};this.sendEvent(r.PlayerEvents.AD_ERROR,t)},e.prototype.onStart=function(e){this.sendEvent(r.PlayerEvents.AD_START,e.data),this.videoElement.style.display="none",this.adsRenderingDiv.style.display="block"},e.prototype.onEnd=function(e){this.videoElement.style.display="block",this.adsRenderingDiv.style.display="none",this.sendEvent(r.PlayerEvents.AD_END)},e.prototype.onAddElement=function(e){console.log("adsplayer - "+e.type+" / "+e.data.type)},e.prototype.onRemoveElement=function(e){console.log("adsplayer - "+e.type+" / "+e.data.type)},e.prototype.onPlay=function(e){console.log("adsplayer - "+e.type)},e.prototype.onPause=function(e){console.log("adsplayer - "+e.type)},e.prototype.onClick=function(e){console.log("adsplayer - "+e.type)},e.prototype.sendEvent=function(e,t){var i=document.createEvent("CustomEvent");i.initCustomEvent(e,!1,!1,t),this.videoElement.dispatchEvent(i)},e}();t.AdsPlugin=o},function(e,t){e.exports=i},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(0),n=i(16),o={name:"Prisme (local)",activationUrl:"",serverUrl:"http://localhost:3004/metrics",enable:!0,dbServerUrl:"",collector:"OnePlayerCollector",formatter:"Prisme",sendingTime:1e4},s=function(){function e(){}return e.prototype.getType=function(){return r.PluginType.METRICS},e.prototype.getVersion=function(){return this.checkInitialized(),"metricsagent.js_"+this.metricsAgent.getVersion()},e.prototype.init=function(e,t,i){var r=o;for(var s in i)r[s]=i[s];this.metricsAgent=new n(r),this.metricsAgent.init(e,t)},e.prototype.enableLogs=function(e){},e.prototype.reset=function(){this.checkInitialized(),this.metricsAgent.destroy()},e.prototype.load=function(e){var t=this;return new Promise(function(i,r){t.metricsAgent.load(e),i()})},e.prototype.stop=function(){this.metricsAgent.reset()},e.prototype.checkInitialized=function(){if(!this.metricsAgent)throw new Error("Metrics plugin not initialized")},e}();t.MetricsPlugin=s},function(e,t,i){"use strict";var r=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var n=i(4),o=i(0),s=i(1),a=i(8),d=i(3),l={MSS:{LIVE:{liveDelay:16,stableBufferTime:16,bufferTimeAtTopQuality:16,bufferTimeAtTopQualityLongForm:16,lowLatencyEnabled:!1,keepProtectionMediaKeys:!0}}},h={video:o.MediaType.Video,audio:o.MediaType.Audio,text:o.MediaType.Text,fragmentedText:o.MediaType.Text,embeddedText:o.MediaType.Text},u=function(e){function t(){var t=e.call(this)||this;return t.defaultSettings={},t.audioSettings={},t.mediaPlayer=d.default.MediaPlayer().create(),t.mediaPlayer.on(d.default.MediaPlayer.events.ERROR,t.onError,t),t.mediaPlayer.on(d.default.MediaPlayer.events.PLAYBACK_PLAYING,t.onPlaybackPlaying,t),t.mediaPlayer.on(d.default.MediaPlayer.events.PLAYBACK_SEEKING,t.onPlaybackSeeking,t),t.mediaPlayer.on(d.default.MediaPlayer.events.PLAYBACK_WAITING,t.onPlaybackWaiting,t),t.ttmlController=new a.TTMLController,t.ttmlController.init(t.mediaPlayer),t.getDefaultSettings(),t}return r(t,e),t.prototype.getVersion=function(){return this.checkInitialized(),"dash.js_"+this.mediaPlayer.getVersion()},t.prototype.getPlayerType=function(){return o.PlayerType.DASHJS},t.prototype.init=function(t,i){return this.checkInitialized(),e.prototype.init.call(this,t,i),this.mediaPlayer.initialize(this.videoElement,void 0,!0),i?this.mediaPlayer.attachTTMLRenderingDiv(i):(i=document.createElement("div"),this.videoElement.parentNode&&(this.videoElement.parentNode.appendChild(i),this.mediaPlayer.attachTTMLRenderingDiv(i))),this.mediaPlayer.enableLastMediaSettingsCaching(!1),this.mediaPlayer.enableLastBitrateCaching(!0),this.mediaPlayer.setLowLatencyEnabled(!1),Promise.resolve()},t.prototype.setConfig=function(e){for(var t in this.checkInitialized(),e)this.defaultSettings[t]=e[t];this.applySettings(e)},t.prototype.enableLogs=function(t){e.prototype.enableLogs.call(this,t),this.checkInitialized(),this.mediaPlayer.getDebug().setLogToBrowserConsole(t)},t.prototype.addEventListener=function(e,t,i){this.checkInitialized(),this.mediaPlayer.on(e,t,i)},t.prototype.removeEventListener=function(e,t,i){this.checkInitialized(),this.mediaPlayer.off(e,t,i)},t.prototype.reset=function(){e.prototype.reset.call(this),this.checkInitialized(),this.mediaPlayer.reset()},t.prototype.getMetricsFor=function(e){return this.checkInitialized(),this.mediaPlayer.getMetricsFor(this.getType(e))},t.prototype.play=function(){return this.checkInitialized(),this.mediaPlayer.play(),Promise.resolve()},t.prototype.pause=function(){this.checkInitialized(),this.mediaPlayer.pause()},t.prototype.seek=function(e){this.checkInitialized(),this.mediaPlayer.seek(e)},t.prototype.stop=function(t,i){void 0===t&&(t=!0),e.prototype.stop.call(this,t,i),this.checkInitialized(),t||this.mediaPlayer.isDynamic()?this.mediaPlayer.attachSource(null):(this.pause(),this.seek(0))},t.prototype.getDuration=function(){return this.checkInitialized(),this.mediaPlayer.isReady()?this.mediaPlayer.duration():0},t.prototype.isLive=function(){return this.checkInitialized(),this.mediaPlayer.isDynamic()},t.prototype.getTime=function(){return this.checkInitialized(),this.mediaPlayer.isReady()?this.mediaPlayer.time(void 0):0},t.prototype.getTracksForType=function(e){this.checkInitialized();for(var t=[],i=this.getType(e),r=this.mediaPlayer.getCurrentTrackFor(i),n=this.mediaPlayer.getTracksFor(i),o=0;o<n.length;o++)t.push(this.mediaInfoToTrackInfo(n[o],t.length,n[o]===r));return t},t.prototype.getSelectedTrackForType=function(e){this.checkInitialized();for(var t=this.getTracksForType(e),i=0;i<t.length;i++)if(t[i].selected)return t[i];return null},t.prototype.getQualityForType=function(e){return this.checkInitialized(),this.mediaPlayer.getQualityFor(this.getType(e))},t.prototype.getBufferLevelForType=function(e){return this.checkInitialized(),this.mediaPlayer.getBufferLength(this.getType(e))},t.prototype.selectTrackForType=function(e,t){this.checkInitialized();var i=this.getType(e),r=this.mediaPlayer.getTracksFor(i);if(r&&0!==r.length){var n=r.filter(function(e,i){return void 0===e.id?i===parseInt(t,10):e.id===t})[0];this.storeDefaultLanguage(e,n.lang),this.mediaPlayer.setCurrentTrack(n)}},t.prototype.selectTrack=function(e){this.selectTrackForType(e.mediaType,e.id)},t.prototype.setDefaultAudioLanguage=function(e){this.checkInitialized(),this.audioSettings.lang=e},t.prototype.setDefaultTextLanguage=function(e){this.checkInitialized(),this.mediaPlayer.setTextDefaultLanguage(e)},t.prototype.enableText=function(e){this.checkInitialized(),this.storeTextState(e),this.mediaPlayer.enableText(e)},t.prototype.isTextEnabled=function(){return this.checkInitialized(),this.mediaPlayer.isTextEnabled()},t.prototype.setDefaultTextEnabled=function(e){this.checkInitialized(),this.mediaPlayer.setTextDefaultEnabled(e)},t.prototype.loadStream=function(t){return e.prototype.loadStream.call(this,t),this.checkInitialized(),t.protData&&this.mediaPlayer.setProtectionData(t.protData),this.downloadError=null,this.mediaPlayer.on(d.default.MediaPlayer.events.STREAM_INITIALIZED,this.onStreamInitialized,this),this.applySettings(this.defaultSettings),t.protocol&&t.type&&l[t.protocol]&&l[t.protocol][t.type]&&this.applySettings(l[t.protocol][t.type]),this.mediaPlayer.attachSource(t.url),this.mediaPlayer.setInitialMediaSettingsFor("audio",this.audioSettings),Promise.resolve()},t.prototype.limitToLowestBitrate=function(e){if(!0===e){var t=this.getSelectedTrackForType(o.MediaType.Video),i=this.getSelectedTrackForType(o.MediaType.Audio);this.mediaPlayer.setMaxAllowedBitrateFor("video",Math.floor(t.qualities[0].bitrate/1e3)+1),this.mediaPlayer.setMaxAllowedBitrateFor("audio",Math.floor(i.qualities[0].bitrate/1e3)+1)}else this.mediaPlayer.setMaxAllowedBitrateFor("video",NaN),this.mediaPlayer.setMaxAllowedBitrateFor("audio",NaN)},t.prototype.checkInitialized=function(){if(!this.mediaPlayer)throw"DashJS player not initialized!"},t.prototype.getDefaultSettings=function(){this.defaultSettings.liveDelay=this.mediaPlayer.getLiveDelay(),this.defaultSettings.stableBufferTime=this.mediaPlayer.getStableBufferTime(),this.defaultSettings.bufferTimeAtTopQuality=this.mediaPlayer.getBufferTimeAtTopQuality(),this.defaultSettings.bufferTimeAtTopQualityLongForm=this.mediaPlayer.getBufferTimeAtTopQualityLongForm(),this.defaultSettings.lowLatencyEnabled=this.mediaPlayer.getLowLatencyEnabled()},t.prototype.applySettings=function(e){e.liveDelay&&this.mediaPlayer.setLiveDelay(e.liveDelay),e.stableBufferTime&&this.mediaPlayer.setStableBufferTime(e.stableBufferTime),e.bufferTimeAtTopQuality&&this.mediaPlayer.setBufferTimeAtTopQuality(e.bufferTimeAtTopQuality),e.bufferTimeAtTopQualityLongForm&&this.mediaPlayer.setBufferTimeAtTopQualityLongForm(e.bufferTimeAtTopQualityLongForm),e.lowLatencyEnabled&&this.mediaPlayer.setLowLatencyEnabled(e.lowLatencyEnabled),e.keepProtectionMediaKeys&&this.mediaPlayer.keepProtectionMediaKeys(e.keepProtectionMediaKeys),e.minVideoBitrate&&this.mediaPlayer.setMinAllowedBitrateFor("video",e.minVideoBitrate)},t.prototype.mediaInfoToTrackInfo=function(e,t,i){var r={mediaType:h[e.type],id:void 0!==e.id?e.id:t.toString(),selected:i,codec:e.codec,mimeType:e.mimeType,lang:e.lang,qualities:e.bitrateList.map(function(e){return{bitrate:e.bandwidth,width:e.width,height:e.height}})};return r.mediaType===o.MediaType.Audio&&e.roles&&(-1!==e.roles.indexOf("main")&&(r.kind=o.AudioKind.Main),-1!==e.roles.indexOf("dub")&&(r.kind=o.AudioKind.Translation),-1!==e.roles.indexOf("alternate")&&(r.kind=e.accessibility&&-1!==e.accessibility.indexOf("2")?o.AudioKind.Clean:o.AudioKind.Alternative),-1!==e.roles.indexOf("commentary")&&(r.kind=o.AudioKind.Commentary)),r.mediaType===o.MediaType.Text&&e.roles&&(-1!==e.roles.indexOf("main")?r.kind=e.accessibility&&-1!==e.accessibility.indexOf("2")?o.TextKind.Descriptions:o.TextKind.Captions:-1!==e.roles.indexOf("alternate")&&(r.kind=o.TextKind.Subtitles)),r},t.prototype.onStreamInitialized=function(e){this.mediaPlayer.off(d.default.MediaPlayer.events.STREAM_INITIALIZED,this.onStreamInitialized,this),this.stream.startTime&&this.mediaPlayer.seek(this.stream.startTime)},t.prototype.getResponseText=function(e){return"text"===e.responseType?e.responseText:""},t.prototype.getType=function(e){return e===o.MediaType.Text?"fragmentedText":e},t.prototype.onPlaybackPlaying=function(e){this.downloadError=null},t.prototype.onPlaybackSeeking=function(e){this.downloadError=null},t.prototype.onPlaybackWaiting=function(e){this.processDownloadError()},t.prototype.processDownloadError=function(){if(null!==this.downloadError){var e=h[this.downloadError.data.request.mediaType];e!==o.MediaType.Video&&e!==o.MediaType.Audio||this.videoElement.readyState>2&&this.videoElement.playbackRate>0||(this.sendErrorEvent(s.PlayerErrorCode.DOWNLOAD_ERR_CONTENT,this.downloadError.message,{type:e,url:this.downloadError.data.request.url,status:this.downloadError.data.response.status,response:this.getResponseText(this.downloadError.data.response),segmentTime:this.downloadError.data.request.startTime,segmentDuration:this.downloadError.data.request.duration}),this.downloadError=null)}},t.prototype.onError=function(e){if(!e.event){var t=e.error;switch(t.code){case 1:this.sendErrorEvent(s.PlayerErrorCode.MEDIA_ERR_ABORTED,t.message);break;case 2:this.sendErrorEvent(s.PlayerErrorCode.MEDIA_ERR_NETWORK,t.message);break;case 3:this.sendErrorEvent(s.PlayerErrorCode.MEDIA_ERR_DECODE,t.message);break;case 4:this.sendErrorEvent(s.PlayerErrorCode.MEDIA_ERR_SRC_NOT_SUPPORTED,t.message);break;case 5:this.sendErrorEvent(s.PlayerErrorCode.MEDIA_ERR_ENCRYPTED,t.message);break;case d.default.MediaPlayer.errors.CAPABILITY_MEDIASOURCE_ERROR_CODE:this.sendErrorEvent(s.PlayerErrorCode.CAPABILITY_ERR_MEDIASOURCE);break;case d.default.MediaPlayer.errors.MEDIASOURCE_TYPE_UNSUPPORTED_CODE:this.sendErrorEvent(s.PlayerErrorCode.CAPABILITY_ERR_MEDIASOURCE,t.message);break;case d.default.MediaPlayer.errors.DOWNLOAD_ERROR_ID_MANIFEST_CODE:this.sendErrorEvent(s.PlayerErrorCode.DOWNLOAD_ERR_MANIFEST,t.message,{url:t.data.request.url,status:t.data.response.status,response:this.getResponseText(t.data.response)});break;case d.default.MediaPlayer.errors.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE:case d.default.MediaPlayer.errors.DOWNLOAD_ERROR_ID_CONTENT_CODE:this.downloadError=t,this.processDownloadError();break;case d.default.MediaPlayer.errors.CAPABILITY_MEDIAKEYS_ERROR_CODE:this.sendErrorEvent(s.PlayerErrorCode.CAPABILITY_ERR_MEDIAKEYS,t.message);break;case d.default.MediaPlayer.errors.MEDIA_KEYERR_UNKNOWN_CODE:this.sendErrorEvent(s.PlayerErrorCode.MEDIA_KEYERR_UNKNOWN,t.message);break;case d.default.MediaPlayer.errors.MEDIA_KEYERR_CLIENT_CODE:this.sendErrorEvent(s.PlayerErrorCode.MEDIA_KEYERR_CLIENT,t.message);break;case d.default.MediaPlayer.errors.MEDIA_KEYERR_SERVICE_CODE:this.sendErrorEvent(s.PlayerErrorCode.MEDIA_KEYERR_SERVICE,t.message);break;case d.default.MediaPlayer.errors.MEDIA_KEYERR_OUTPUT_CODE:this.sendErrorEvent(s.PlayerErrorCode.MEDIA_KEYERR_OUTPUT,t.message);break;case d.default.MediaPlayer.errors.MEDIA_KEYERR_DOMAIN_CODE:this.sendErrorEvent(s.PlayerErrorCode.MEDIA_KEYERR_DOMAIN,t.message);break;case d.default.MediaPlayer.errors.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE:this.sendErrorEvent(s.PlayerErrorCode.MEDIAKEYS_ERR_KEYSYSTEM_ACCESS,t.messageS);break;case d.default.MediaPlayer.errors.SERVER_CERTIFICATE_UPDATED_ERROR_CODE:this.sendErrorEvent(s.PlayerErrorCode.MEDIAKEYS_ERR_SERVER_CERTIFICATE,t.message);break;case d.default.MediaPlayer.errors.KEY_SESSION_CREATED_ERROR_CODE:this.sendErrorEvent(s.PlayerErrorCode.MEDIAKEYS_ERR_CREATE_SESSION,t.message);break;case d.default.MediaPlayer.errors.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE:this.sendErrorEvent(s.PlayerErrorCode.MEDIAKEYS_ERR_UNKNOWN_LICENSER,t.message);break;case d.default.MediaPlayer.errors.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE:this.sendErrorEvent(s.PlayerErrorCode.MEDIAKEYS_ERR_LICENSE_REQUEST,t.message,{url:"",code:0,response:t.message});break;case d.default.MediaPlayer.errors.MEDIA_KEYERR_CODE:this.sendErrorEvent(s.PlayerErrorCode.MEDIAKEYS_ERR_KEY_ERROR,t.message);break;case d.default.MediaPlayer.errors.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE:this.sendErrorEvent(s.PlayerErrorCode.MEDIAKEYS_ERR_EXPIRED,t.message);break;default:this.sendErrorEvent(s.PlayerErrorCode.PLAYER_INTERNAL_ERROR,t.message,t)}}},t}(n.DefaultPlayer);t.DashJSPlayer=u},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(0);t.PlayerType=r.PlayerType,t.ServiceType=r.ServiceType,t.HasProtocol=r.HasProtocol,t.MediaType=r.MediaType,t.AudioKind=r.AudioKind,t.TextKind=r.TextKind,t.PluginType=r.PluginType,t.PlayerEvents=r.PlayerEvents;var n=i(1);t.PlayerErrorCode=n.PlayerErrorCode;var o=i(2);t.OnePlayer=o.OnePlayer}])});
//# sourceMappingURL=oneplayer.js.map